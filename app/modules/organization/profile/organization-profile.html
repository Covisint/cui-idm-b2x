<!-- processHTML:remove -->
<div class="code-info">The markup and javascript used to build this page can be found <a class="cui-link" href="https://github.com/thirdwavellc/cui-idm-b2x/tree/master/app/modules/organization/profile" target="blank">here</a>.</div>
<!-- /processHTML -->

<div class="cui-organization cui-organization-dir">
  <!-- Action Header -->
  <div class="cui-action">
    <nav ng-include="'app/modules/organization/partials/breadcrumbs.html'" onload="orgId=orgProfile.stateParamsOrgId"></nav>
    <nav ng-if="!base.loader.for['orgProfile.init']" ng-include="'app/modules/organization/partials/mobileNav.html'" ng-init="orgName=orgProfile.organization.name"></nav>
    <!-- <div class="cui-action__actions" ng-include="'app/modules/organization/partials/invite-actions.html'"></div> -->
              <div class="cui-action__actions">
                <div class="cui-action__action-container" ng-if="base.accessByAnyAdmin()" ng-click="orgProfile.granted.sortClicked =! orgProfile.granted.sortClicked" id="sort-buttons" off-click="orgProfile.granted.sortClicked=false">
               
              <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="48px"
                 height="48px" viewBox="0 0 48 48" enable-background="new 0 0 48 48" xml:space="preserve">
              <g id="mail-open">
                <path d="M43,47H5c-1.7,0-3-1.3-3-3V21.3c0-1.1,0.5-2.1,1.2-2.9l4-3.8L8.6,16l-4,3.8C4.2,20.2,4,20.7,4,21.3V44
                  c0,0.6,0.4,1,1,1h38c0.6,0,1-0.4,1-1V21.3c0-0.5-0.2-1.1-0.6-1.4l-4-3.8l1.4-1.4l4,3.8c0.8,0.8,1.2,1.8,1.2,2.9V44
                  C46,45.7,44.7,47,43,47z"/>
                <path d="M30.3,7.4l-5-4.7c-0.8-0.7-2-0.7-2.8,0l-5,4.7L16.3,6l5-4.7c1.5-1.5,4-1.5,5.5,0l5,4.7L30.3,7.4z"/>
                <path d="M3.7,46.7l-1.4-1.4l13.4-13.4c0.6-0.6,1.3-0.9,2.1-0.9h13.3c0.8,0,1.6,0.3,2.2,1l12.4,13.4l-1.5,1.4
                  L31.9,33.3c-0.2-0.2-0.5-0.3-0.7-0.3H17.8c-0.3,0-0.5,0.1-0.7,0.3L3.7,46.7z"/>
                
                  <rect x="1.3" y="27" transform="matrix(0.7926 0.6097 -0.6097 0.7926 19.042 1.427599e-002)" width="16.4" height="2"/>
                <rect x="38.5" y="20.6" transform="matrix(0.6726 0.74 -0.74 0.6726 33.6509 -20.0629)" width="2" height="14.9"/>
                <path d="M41,27h-2V9c0-0.6-0.4-1-1-1H10C9.4,8,9,8.4,9,9v18H7V9c0-1.7,1.3-3,3-3h28c1.7,0,3,1.3,3,3V27z"/>
                <path d="M20,15h-6c-0.6,0-1-0.4-1-1s0.4-1,1-1h6c0.6,0,1,0.4,1,1S20.6,15,20,15z"/>
                <path d="M34,19H14c-0.6,0-1-0.4-1-1s0.4-1,1-1h20c0.6,0,1,0.4,1,1S34.6,19,34,19z"/>
                <path d="M34,23H14c-0.6,0-1-0.4-1-1s0.4-1,1-1h20c0.6,0,1,0.4,1,1S34.6,23,34,23z"/>
              </g>
              </svg>
                <!-- Sort Popover -->
                <div cui-popover class="cui-popover cui-popover--menu cui-popover--positionless" target="#sort-buttons" pointer-height="13" pointer-width="10" popover-positions="[{position:'bottom',contentOffset:'-40px'}, 'any']" attachment="top middle" target-attachment="bottom middle" ng-if="orgProfile.granted.sortClicked" style="width:191px;">
                  <div class="cui-popover__row">
                    <span ui-sref="invitation.inviteUser">{{'cui-new-user' | translate}}</span>
                  </div>
                  <div class="cui-popover__row">
                     <span ui-sref="invitation.division">{{'cui-new-division' | translate}}</span>
                  </div>
                  <div class="cui-popover__row">
                     <span ui-sref="invitation.tlo">{{'cui-new-TLO' | translate}}</span>
                  </div>
                </div>
              </div>
              </div>
  </div>

  <!-- Profile Content -->
  <div class="cui-organization__main-container">
    <!-- Page Loading -->
    <div class="cui-loading__container" ng-if="base.loader.for['orgProfile.init']">
        <div class="cui-loading--center"><div class="cui-loading"></div></div>
    </div>

    <!-- Page Errors -->
    <p class="cui-users__password-success" style="color:red" ng-if="base.apiError.for['orgProfile.init']">{{'error-generic' | translate}}</p>

    <!-- Organization Information -->
    <div ng-if="!base.loader.for['orgProfile.init'] && orgProfile.organization">
      <h3 class="cui-organization__page-title">{{orgProfile.organization.name}}</h3>
      <h4 class="cui-field-val__field" ng-if="orgProfile.securityAdmins">{{'cui-security-admin' | translate}}</h4>

      <div class="cui-organization__row">
        <!-- Admins -->
        <div class="cui-organization__info-block">
          <div class="cui-organization__admin-block-wrapper" ng-if="orgProfile.securityAdmins">
            <div class="cui-organization__admin-block" ng-repeat="admin in orgProfile.securityAdmins track by admin.id">
              <!-- Name -->
              <div class="cui-field-val">
                <span class="cui-field-val__field">{{'cui-name' | translate}}: </span>
                <span class="cui-field-val__val">{{admin.name.given}} {{admin.name.surname}}</span>
              </div>
              <!-- ID -->
              <div class="cui-field-val">
                <span class="cui-field-val__field">{{'username' | translate}}: </span>
                <span class="cui-field-val__val">{{admin.username}}</span>
              </div>
              <!-- Title -->
              <div class="cui-field-val">
                <span class="cui-field-val__field">{{'title' | translate}}: </span>
                <span class="cui-field-val__val">{{admin.title}}</span>
              </div>
              <!-- Phone -->
              <div class="cui-field-val">
                <span class="cui-field-val__field">{{'cui-phone' | translate}}: </span>
                <span class="cui-field-val__val">{{admin.phones[0].number}}</span>
              </div>
              <!-- Email -->
              <div class="cui-field-val">
                <span class="cui-field-val__field">{{'cui-email' | translate}}: </span>
                <span class="cui-field-val__val"><a class="cui-link" href="mailto:{{admin.email}}">{{admin.email}}</a></span>
              </div>
            </div>
          </div>

          <!-- Address -->
          <div class="cui-organization__admin-block-wrapper">
            <div class="cui-field-val cui-field-val--stack cui-organization__admin-block cui-organization__admin-block__right">
              <h4 class="cui-field-val__field">{{'cui-address' | translate}}: </h4>
              <span class="cui-field-val__val">{{orgProfile.organization.addresses[0].streets[0]}}</span>
              <span class="cui-field-val__val">{{orgProfile.organization.addresses[0].city}}</span>
              <span class="cui-field-val__val">{{orgProfile.organization.addresses[0].state}}, {{orgProfile.organization.addresses[0].postal}}</span>
              <span class="cui-field-val__val">{{orgProfile.organization.phones[0].number}}</span>
            </div>

            <!-- Info -->
            <div class="cui-organization__admin-block cui-organization__admin-block__right">
              <!-- <h4 class="cui-field-val__field">{{'cui-info' | translate}}:</h4> -->
              <div class="cui-field-val" ng-if="orgProfile.organization.url">
                <span class="cui-field-val__field">{{'url' | translate}}: </span>
                <span class="cui-field-val__val"><a class="cui-link" ng-href="{{orgProfile.organization.url}}">{{orgProfile.organization.url}}</a></span>
              </div>
              <div class="cui-field-val" ng-if="orgProfile.passwordPolicy">
                <span class="cui-field-val__field">{{'cui-password-policy' | translate}}: </span>
                <span class="cui-field-val__val">{{orgProfile.passwordPolicy.name}}</span>
              </div>
              <div class="cui-field-val" ng-if="orgProfile.authenticationPolicy">
                <span class="cui-field-val__field">{{'cui-authentication-policy' | translate}}: </span>
                <span class="cui-field-val__val">{{orgProfile.authenticationPolicy.name}}</span>
              </div>
            </div>
            <!-- More Info -->
            <div class="cui-organization__admin-block cui-organization__admin-block__right" ng-if="orgProfile.organization.attributes" >
              <h4 class="cui-field-val__field">{{'cui-more-information' | translate}}:</h4>
              <div class="cui-field-val" ng-repeat=" attribute in orgProfile.organization.attributes">
                <span class="cui-field-val__field">{{attribute.name}}: </span>
                <span class="cui-field-val__val">{{attribute.value}}</span>
              </div>
            </div>
            <!-- Status History -->
            <div class="cui-organization__admin-block cui-organization__admin-block__right" ng-if="orgProfile.statusHistory">
              <div class="cui-action">
                <h3 class="cui-action__title ">{{'status-history' | translate}}:</h3>
                <div class="cui-action__actions">
                    <!-- Refine -->
                    <div class="cui-action__action-container" ng-click="orgProfile.refineClicked =! orgProfile.refineClicked" id="refine-button" off-click="orgProfile.refineClicked=false">
                      <cui-icon cui-svg-icon="fa:filter10" svg-class="cui-action__icon cui-action__icons__space" use-class="cui-icon__ref" viewbox="0 0 216 146" preserveAspectRatio="xMidYMid meet"></cui-icon>
                      <span class="cui-action__action-label">{{'refine' | translate}}</span>
                      <!-- Refine Popover -->
                      <div cui-popover class="cui-popover cui-popover--menu cui-popover--positionless" target="#refine-button" pointer-height="13" pointer-width="10" popover-positions="[{position:'bottom',contentOffset:'-70px'}, 'any']" ng-if="orgProfile.refineClicked" style="width:214px">
                        <div class="cui-popover__row">
                          <span ng-click="orgProfile.updateSearch()">{{'all' | translate}}</span>
                        </div>
                        <div class="cui-popover__row">
                          <span ng-click="orgProfile.updateSearch('active')">{{'active' | translate}}</span>
                        </div>
                        <div class="cui-popover__row">
                          <span ng-click="orgProfile.updateSearch('suspended')">{{'suspended' | translate}}</span>
                        </div>
                        <div class="cui-popover__row">
                          <span ng-click="orgProfile.updateSearch('inactive')">{{'inactive' | translate}}</span>
                        </div>
                      </div>
                    </div>
                </div>
              </div>
              <div class="custom-loading__container">
                <!-- status loading -->
                <div class="cui-loading__container" ng-if="base.loader.for['orgProfile.status']">
                  <div class="cui-loading--center"><div class="cui-loading"></div></div>
                </div>
                <!-- status error -->
                <p class="cui-users__password-success" style="color:red" ng-if="base.apiError.for['orgProfile.status']">{{'error-generic' | translate}}</p>
                <!-- status content -->
                <p class="cui-users__password-success" ng-if="orgProfile.statusHistory.length===0">{{'no-records' | translate}}</p>
                <div class="cui-field-val" ng-repeat=" status in orgProfile.statusHistory">
                  <span class="cui-field-val__field">{{status.status|lowercase}}: </span>
                  <span class="cui-field-val__val">{{status.creation |date:base.appConfig.dateFormat}}</span>
                </div>
              </div>              
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
