<!-- Page Loading -->
<div class="cui-loading__container--user-details" ng-if="orgDetailsRoles.loading">
  <div class="cui-loading--center"><div class="cui-loading"></div></div>
</div>
<div class="class-toggle cui-modal" ng-if="orgDetailsRoles.success" toggled-class="cui-modal--hide" ng-click="toggleClass()">
    <div class="cui-modal__pane">
        <div class="cui-modal__icon">
            <cui-icon cui-svg-icon="cui:check-with-border" class="cui-modal__icon"></cui-icon>
        </div>
        <span class="cui-modal__primary-message">{{'cui-success' | translate}}</span>
        <span class="cui-modal__secondary-message">{{'your-assign-role-success' | translate}}</span>
    </div>
</div>

<div ng-if="!orgDetailsRoles.loading">
	<!-- Assigned Roles -->
	<div class="cui-users__profile-info">
		<!-- Assigned Roles: Title -->
		<div class="cui-action">
			<div class="cui-action__title">{{'cui-assigned-roles'|translate}}</div>
		</div>
		<!-- Assigned Roles: List -->
		<div ng-repeat="role in orgDetailsRoles.assignedRoles | orderBy:'name' track by role.roleId">
			<p ng-if="orgDetailsRoles.assignedRoles.length===0">{{'cui-no-roles-assigned'|translate}}</p>
			<span>{{role.name}}</span>
		</div>
	</div>
	        <!-- Right Block -->
        <div class="cui-users__profile-info">
            <div class="cui-action">
                <div class="cui-action__title">{{'cui-available-roles'|translate}}</div>
            </div>
            <!-- no history -->
            <div class="cui-media__content" ng-if="orgDetailsRoles.rolesGrantable.length===0&&!orgDetailsRoles.grantedHistoryError">{{'cui-no-details'|translate}}</div>
            <p class="cui-users__password-success" style="color:red" ng-if="orgDetailsRoles.grantedHistoryError"><b>{{'error-generic'|translate}}</b></p>
             <div class="cui-media cui-media--border cui-media--tr" ng-repeat="roles in orgDetailsRoles.rolesGrantable">
              <div class="cui-media__body">
                 <span class="cui-checkbox__container">
                            <input class="cui-checkbox" type="checkbox" id="{{'checkbox-'+roles.roleId}}" ng-model="orgDetailsRoles.appCheckbox[roles.roleId]" />
                            <label ng-click="orgDetailsRoles.checkrequest(roles.roleId)" for="{{'checkbox-'+roles.roleId}}" class="cui-checkbox__label"> {{roles.name}}</label>
                        </span>
              </div>
            </div>
            <div class="cui-applications__submit-options" ng-if="orgDetailsRoles.rolesGrantable.length>0&&!orgDetailsRoles.grantedHistoryError">
                <button class="cui-button" ng-class="{'cui-button--error' : !orgDetailsRoles.appCheckboxValid }" ng-click="orgDetailsRoles.appCheckboxValid&&orgDetailsRoles.assignRoles()">
                    <span ng-if="!orgDetailsRoles.rolessubmitError">{{'submit-request' | translate}}</span>
                    <span ng-if="orgDetailsRoles.rolessubmitError===true">{{'cui-error-try-again' | translate}}</span>
                </button>
            </div>
        </div>
</div>
