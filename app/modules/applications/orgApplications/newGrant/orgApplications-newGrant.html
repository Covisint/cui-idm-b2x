<h3 ng-click="base.goBack()">&#60; {{orgAppNewGrant.service.name | cuiI18n}} &#8211; {{'new-grant' | translate}}</h3>

<div class="cui-action__actions">
	<svg ui-sref="base.goBack()" xmlns="http://www.w3.org/2000/svg" class="cui-action__icon cui-action__icon--close" preserveAspectRatio="xMidYMid meet" viewBox="0 0 48 53">
  	<use class="cui-icon__ref" xlink:href="node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#close"></use>
  </svg>
</div>

<p>{{orgAppNewGrant.service.name | cuiI18n}}</p>
<p>{{'granted' | translate}}: {{orgAppNewGrant.service.grant.instant | date:base.appConfig.dateFormat}}</p>
<p>{{orgAppNewGrant.service.grant.status}}</p>


<div class="cui-action__actions">
	<!-- Sort -->
  <div class="cui-action__action-container" ng-click="orgAppNewGrant.sortClicked=!orgAppNewGrant.sortClicked" id="sort-button" off-click="orgAppNewGrant.sortClicked=false">
  	<!-- Icon -->
  	<cui-icon cui-svg-icon="fa:sort14" svg-class="cui-action__icon" preserveAspectRatio="xMidYMid meet"></cui-icon>
    <span class="cui-action__action-label">{{'sort' | translate}}</span>
    <!-- Sort Popover -->
    <div cui-popover class="cui-popover cui-popover--top cui-popover__categories-popover" target="#sort-button" pointer-height="13" pointer-width="10" popover-positions="[{position:'bottom'}, 'any']" ng-if="orgAppNewGrant.sortClicked">
      <p ng-click="orgAppNewGrant.sort('person.name.given')">{{'cui-alphabetically' | translate}}</p>
      <p ng-click="orgAppNewGrant.sort('creation')">{{'cui-by-date-added' | translate}}</p>  
    </div>
  </div>

  <!-- Refine -->
  <div class="cui-action__action-container" ng-click="orgAppNewGrant.refineClicked=!orgAppNewGrant.refineClicked" id="refine-button" off-click="orgAppNewGrant.refineClicked=false">
  	<!-- Icon -->
  	<cui-icon cui-svg-icon="fa:filter10" svg-class="cui-action__icon" preserveAspectRatio="xMidYMid meet"></cui-icon>
    <span class="cui-action__action-label">{{'refine' | translate}}</span>
    <!-- Refine Popover -->
    <div cui-popover class="cui-popover cui-popover--top cui-popover__categories-popover" target="#refine-button" pointer-height="13" pointer-width="10" popover-positions="[{position:'bottom'}, 'any']" ng-if="orgAppNewGrant.refineClicked">
      <p ng-click="orgAppNewGrant.parseUsersByStatus('all')">{{'all' | translate}}</p>
      <p ng-click="orgAppNewGrant.parseUsersByStatus('active')">{{'active' | translate}}</p>
      <p ng-click="orgAppNewGrant.parseUsersByStatus('suspended')">{{'suspended' | translate}}</p>
    </div>
  </div>

  <!-- Organizations -->
  <div class="cui-action__action-container" ng-click="orgAppNewGrant.organizationsClicked=!orgAppNewGrant.organizationsClicked" id="organizations-button" off-click="orgAppNewGrant.organizationsClicked=false">
  	<!-- Icon -->
  	<cui-icon cui-svg-icon="fa:nine10" svg-class="cui-action__icon" preserveAspectRatio="xMidYMid meet"></cui-icon>
    <span class="cui-action__action-label">{{'organizations' | translate}}</span>
    <!-- Organizations Popover -->
    <div cui-popover class="cui-popover cui-popover--top cui-popover__categories-popover" target="#organizations-button" pointer-height="13" pointer-width="10" popover-positions="[{position:'bottom'}, 'any']" ng-if="orgAppNewGrant.organizationsClicked">
      <div ng-if="!orgAppNewGrant.organizationList">
        <p>{{'cui-no-org-divisions' | translate}}!</p>
      </div>
      <div ng-if="orgAppNewGrant.organizationList" ng-repeat="organization in orgAppNewGrant.organizationList | orderBy:'name' track by organization.id">
        <p ng-if="organization.id!==orgAppNewGrant.organization.id" ng-click="orgAppNewGrant.switchDivision(organization);orgAppNewGrant.organizationsClicked=false">{{organization.name | cuiI18n}}</p>
      </div>
    </div>
  </div>
</div>

<div ng-repeat="grant in orgAppNewGrant.userList track by grant.grantee.id">
	<p>{{grant.person.name.given}} {{grant.person.name.surname}}</p>
	<p>{{grant.grantee.id}}</p>
	<p>{{grant.organization.name}}</p>
	<p>{{grant.status}}</p><br/>
</div>
