<!-- Header -->
<div>
	<!-- Page Title -->
	<h3 class="cui-applications__page-title">{{'cui-applications' | translate}}</h3>

	<div class="cui-action">

		<nav class="cui-breadcrumb">
		    <ul class="cui-breadcrumb__links">
		      <li class="cui-breadcrumb__link">
		        <a href="#/applications/organization" ui-sref="applications.orgApplications.applicationList">Organization Applications</a>
		      </li>
		      <li class="cui-breadcrumb__link">
		        <a class="active" href="#/applications/" ui-sref="applications.myApplications" ui-sref-active="active">My Applications</a>
		      </li>
		    </ul>
	  </nav>


	<!-- New Application Request Icon -->
	<svg ui-sref="applications.orgApplications.newRequest" xmlns="http://www.w3.org/2000/svg" class="cui-action__icon cui-action__icon--new" preserveAspectRatio="xMidYMid meet" viewBox="0 0 48 53">
		<use xlink:href="node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#new"></use>
	</svg>
</div>

<!-- Application Information -->
<div class="org-Application--top">

	<div class="cui-media">
	<!-- Application Avatar -->
	<div class="cui-media__image-container">
  	<a target="_blank"><div class="cui-media__image" cui-avatar-color-class-prefix="cui-avatar__color" cui-avatar-color-count="5" cui-avatar-names="orgApplicationDetails.application.name" cui-avatar-cuii18n-filter cui-avatar="orgApplicationDetails.application.iconUrl"></div></a>
	</div>

	<div class="org-Application--top__mobile-stack">
		<!-- Name -->
		<p class="org-Application--text org-Application--name">{{orgApplicationDetails.application.name | cuiI18n}}</p>
		<!-- Granted -->
		<p class="org-Application--text">Granted: {{orgApplicationDetails.application.creation | date:base.appConfig.dateFormat}}</p>
	  <!-- Status: Active -->
	  	<p class="org-application--text cui-media__content" ng-if="orgApplicationDetails.application.grant.status==='active'">{{orgApplicationDetails.application.grant.status}}
		  	<svg xmlns="http://www.w3.org/2000/svg" class="cui-action__icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 216 146">
		  		<use xlink:href="node_modules/@covisint/cui-icons/dist/font-awesome/font-awesome-out.svg#unlock3"></use>
		  	</svg>
		</p>
		  <!-- Status: Locked -->
		  <p class="org-Application--text cui-media__content" ng-if="orgApplicationDetails.application.grant.status==='locked'">{{orgApplicationDetails.application.grant.status}}
		  	<svg xmlns="http://www.w3.org/2000/svg" class="cui-action__icon" preserveAspectRatio="xMidYMid meet" viewBox="0 0 216 146">
		    	<use xlink:href="node_modules/@covisint/cui-icons/dist/font-awesome/font-awesome-out.svg#lock24"></use>
		    </svg>
		  </p>
	  </div>
	</div>

  <div class="org-Application--controls">
  	<!-- Suspend Button -->
  	<button class="cui-button cui-button--inverted" ng-click="">{{'suspend-app' | translate}}</button>
  	<!-- New Grants Button -->
  	<button class="cui-button cui-button--inverted" ng-click="orgApplicationDetails.newGrants()">{{'new-grants' | translate}}</button>
  </div>
</div>

<!-- Bundled/Related Apps -- DESKTOP -->
<div class="org-Application--bundled-related desktop">

		<!-- Bundled -->
		<div class="org-Application--bundled-related__bundled cui-tile">
			<h3 class="cui-tile__title">{{'bundled-applications' | translate}}</h3>
			<div class="cui-tile__body">
				<p class="cui-tile__text" ng-repeat="application in orgApplicationDetails.application.bundledApps">
					<span>{{application.name | cuiI18n}} {{orgApplicationDetails.application.grant.status}}</span>
					<span class="active">{{'active' | translate}}</span>
				</p>
			</div>
		</div>
		<!-- Related -->
		<div class="org-Application--bundled-related__related cui-tile">
			<h3 class="cui-tile__title">{{'related-applications' | translate}}</h3>
			<div class="cui-tile__body">
				<p class="cui-tile__text" ng-repeat="application in orgApplicationDetails.application.relatedApps">
					<span>{{application.name | cuiI18n}}</span> 
					<button class="cui-button" ng-if="application.requestable" ng-click="orgApplicationDetails.requestRelatedApp(application)">{{'request' | translate}}</button>
				</p>
			</div>
		</div>
</div>

<!-- Bundled/Related Apps -- MOBILE -->
<div class="org-Application--bundled-related mobile">
	<div class="cui-tabs">
		<ul class="cui-tabs__nav">
			<li class="cui-tabs__tab-container">
				<a class="cui-tabs__tab cui-tabs__tab--active" data-pane="tab1" ng-click="orgApplicationDetails.mobileTabs('bundled')">{{'bundled-applications' | translate}}</a>
			</li>
			<li class="cui-tabs__tab-container">
				<a class="cui-tabs__tab" data-pane="tab2" ng-click="orgApplicationDetails.mobileTabs('related')">{{'related-applications' | translate}}</a>
			</li>
		</ul>

		<div class="cui-tabs__content">
			<div id="tab1" class="cui-tabs__tab-pane cui-tabs__tab-pane--active" ng-if="orgApplicationDetails.mobileTabs.bundled">
				<div class="org-Application--bundled-related__bundled cui-tile">
					<p class="cui-tile__text" ng-repeat="application in orgApplicationDetails.application.bundledApps">
						<span>{{application.name | cuiI18n}} {{orgApplicationDetails.application.grant.status}}</span>
						<span class="active">{{'active' | translate}}</span>
					</p>
				</div>
			</div>
			<div id="tab2" class="cui-tabs__tab-pane cui-tabs__tab-pane--active" ng-if="orgApplicationDetails.mobileTabs.related">
				<div class="org-Application--bundled-related__related cui-tile">
					<p class="cui-tile__text" ng-repeat="application in orgApplicationDetails.application.relatedApps">
						<span>{{application.name | cuiI18n}}</span> 
						<button class="cui-button" ng-if="application.requestable" ng-click="orgApplicationDetails.requestRelatedApp(application)">{{'request' | translate}}</button>
					</p>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- User List Section -->
<div class="org-Application--user-list">
	<!-- List Header -->
	<div class="org-Application--user-list__util">
		<h3 class="org-Application--user-list__title">{{'users' | translate}}</h3>
		<div class="cui-action__actions">

	    <!-- Sort -->
	    <div class="cui-action__action-container" ng-click="orgApplicationDetails.sortClicked =! orgApplicationDetails.sortClicked" id="sort-button" off-click="orgApplicationDetails.sortClicked=false">
				<cui-icon cui-svg-icon="fa:sort14" svg-class="cui-action__icon" preserveAspectRatio="xMidYMid meet"></cui-icon>
	      <span class="cui-action__action-label">{{'sort' | translate}}</span>
	      <!-- Sort Popover -->
	      <div cui-popover class="cui-popover cui-popover--top cui-popover__categories-popover" target="#sort-button" pointer-height="13" pointer-width="10" popover-positions="[{position:'bottom'}, 'any']" ng-if="orgApplicationDetails.sortClicked">
	        <p ng-click="orgApplicationDetails.sort('person.name.given')">{{'cui-alphabetically' | translate}}</p>
	        <p ng-click="orgApplicationDetails.sort('creation')">{{'cui-by-date-added' | translate}}</p>  
	      </div>
	    </div>

	    <!-- Refine -->
	    <div class="cui-action__action-container" ng-click="orgApplicationDetails.refineClicked =! orgApplicationDetails.refineClicked" id="refine-button" off-click="orgApplicationDetails.refineClicked=false">
				<cui-icon cui-svg-icon="fa:filter10" svg-class="cui-action__icon" preserveAspectRatio="xMidYMid meet"></cui-icon>
	      <span class="cui-action__action-label">{{'refine' | translate}}</span>
	      <!-- Refine Popover -->
	      <div cui-popover class="cui-popover cui-popover--top cui-popover__categories-popover" target="#refine-button" pointer-height="13" pointer-width="10" popover-positions="[{position:'bottom'}, 'any']" ng-if="orgApplicationDetails.refineClicked">
	        <p ng-click="orgApplicationDetails.parseGrantUsersByStatus('all')">{{'all' | translate}}</p>
	        <p ng-click="orgApplicationDetails.parseGrantUsersByStatus('active')">{{'active' | translate}}</p>
	        <p ng-click="orgApplicationDetails.parseGrantUsersByStatus('suspended')">{{'suspended' | translate}}</p>
	      </div>
	    </div>

	    <!-- Organizations -->
  		<div class="cui-action__action-container" ng-click="orgApplicationDetails.organizationsClicked=!orgApplicationDetails.organizationsClicked" id="organizations-button" off-click="orgApplicationDetails.organizationsClicked=false">
  			<!-- Icon -->
  			<cui-icon cui-svg-icon="fa:nine10" svg-class="cui-action__icon" preserveAspectRatio="xMidYMid meet"></cui-icon>
    		<span class="cui-action__action-label">{{'organizations' | translate}}</span>
    		<!-- Organizations Popover -->
    		<div cui-popover class="cui-popover cui-popover--top cui-popover__categories-popover" target="#organizations-button" pointer-height="13" pointer-width="10" popover-positions="[{position:'bottom'}, 'any']" ng-if="orgApplicationDetails.organizationsClicked">
      		<div ng-if="!orgApplicationDetails.organizationList">
        		<p>{{'cui-no-org-divisions' | translate}}!</p>
      		</div>
      		<div ng-if="orgApplicationDetails.organizationList" ng-repeat="organization in orgApplicationDetails.organizationList | orderBy:'name' track by organization.id">
        		<p ng-if="organization.id!==orgApplicationDetails.organization.id" ng-click="orgApplicationDetails.switchDivision(organization);orgApplicationDetails.organizationsClicked=false">{{organization.name | cuiI18n}}</p>
      		</div>
    		</div>
  		</div>
	  </div>
	</div>

		<!-- User List Header -->
		<div class="org-Application--user-list__header">
			<div class="cui-flex-table">
				<div class="cui-flex-table__tr">
					<div class="cui-flex-table__left">{{'cui-name' | translate}}</div>
					<div class="cui-flex-table__middle">{{'userID' | translate}}</div>
					<div class="cui-flex-table__middle">{{'cui-org' | translate}}</div>
					<div class="cui-flex-table__middle">{{'status' | translate}}</div>
					<div class="cui-flex-table__right"></div>
				</div>
			</div>
		</div>

		<!-- User List -->
		<cui-expandable class="cui-expandable" ng-repeat="grant in orgApplicationDetails.grantList track by grant.grantee.id">
			<cui-expandable-title class="cui-expandable__title org-Application--user-list__line cui-flex-table" >
				<div class="cui-flex-table__tr">

					<!-- User Avatar -->
					<div class="cui-flex-table__avatar-col">
						<div class="cui-flex-table__avatar-container">
							<div class="cui-media__image" cui-avatar cui-avatar-email="grant.person.email" cui-avatar-names="[grant.person.name.given, grant.person.name.surname]" cui-avatar-color-class-prefix="cui-avatar__color" cui-avatar-color-count="5"></div>
						</div>
					</div>

					<div class="cui-flex-table__mobile-stack">
						<div class="cui-flex-table__left">
							<p class="cui-flex-table__text">
								<span class="cui-flex-table__text--name">{{grant.person.name.given}} {{grant.person.name.surname}}</span>
							</p>
						</div>

						<!-- User Id -->
						<div class="cui-flex-table__middle">
							<p class="cui-flex-table__text">
								<span class="cui-flex-table__text--mobile-only">user ID: </span>{{grant.grantee.id}}
							</p>
						</div>
						<!-- Organization Name -->
						<div class="cui-flex-table__middle">
							<p class="cui-flex-table__text">
								<span class="cui-flex-table__text--mobile-only">org: </span>{{grant.organization.name}}
							</p>
						</div>

						<div class="cui-flex-table__middle cui-flex-table__middle--status">
							<p class="cui-flex-table__text active">{{grant.person.status}}</p>
						</div>
					</div>
					<!-- User Status -->
					<div class="cui-flex-table__right">
						<!-- Edit -->
						<p class="cui-flex-table__text">
							<a class="org-Application--edit" href="javascript:void(0)" ng-click="toggleExpand()">{{'edit' | translate}}</a>
						</p>
					</div>
				</div>

			</cui-expandable-title>
		  <cui-expandable-body class="cui-expandable__body">

		  	<!-- 
		  	Main Admin Expandable 
		  	-->
		  	<div class="cui-expandable__content">
			  		<!-- Close Icon -->
			  	<div class="collapse" ng-click="collapse()">
			  		<cui-icon cui-svg-icon="cui:close-no-fill" svg-class="cui-action__icon" preserveAspectRatio="xMidYMid meet"></cui-icon>
			  	</div>

		  		<div class="cui-actions">

				  	<div class="cui-actions__admin-select">
				  		
				  		<span>Administrator</span>

				  		<div class="cui-radio cui-radio--basic-rtl">
						    <input class="cui-radio__input" type="radio" name="radio-choice-basic" id="radio-choice-1" value="choice-1">
						    <label class="cui-radio__label" for="radio-choice-1"><span></span>{{'no' | translate}}</label>
					  	</div>
					  	<div class="cui-radio cui-radio--basic-rtl">
						    <input class="cui-radio__input" type="radio" name="radio-choice-basic" id="radio-choice-2" value="choice-2">
						    <label class="cui-radio__label" for="radio-choice-2"><span></span>{{'yes' | translate}}</label>
					  	</div>

				  	</div>

				  	<div class="cui-actions__edit-controls">
				  		<a class="cui-actions__edit-controls--link" href="#">{{'edit' | translate}}</a>
				  		<a class="cui-actions__edit-controls--link" href="">{{'suspend' | translate}}</a>
				  	</div>

			  	</div>


					<p class="org-Application--claim-title">{{grant.claims[0].claimValues[0].description | cuiI18n}}</p>

					<p class="org-Application--claim cui-checkbox__container"><input class="cui-checkbox" type="checkbox" id="option-4"/><label class="cui-checkbox__label" for="option-4">{{grant.claims[0].description | cuiI18n}}</label></p>
					<button class="cui-button cui-button--update">{{'update-grant-settings' | translate}}</button>
		  	</div>

		  	<!-- 
		  	ASSIGN EXPANDABLE (ZEPLIN 30a) 
		  	-->
				<div class="cui-expandable__content cui-edit-user">
			  	<!-- Close Icon -->
			  	<div class="collapse" ng-click="collapse()">
			  		<cui-icon cui-svg-icon="cui:close-no-fill" svg-class="cui-action__icon" preserveAspectRatio="xMidYMid meet"></cui-icon>
			  	</div>

			  	<div class="cui-actions">

				  	<div class="cui-actions__admin-select">
				  		
				  		<span>Administrator</span>

				  		<div class="cui-radio cui-radio--basic-rtl">
						    <input class="cui-radio__input" type="radio" name="radio-choice-basic" id="radio-choice-2" value="choice-2">
						    <label class="cui-radio__label" for="radio-choice-2"><span></span>{{'no' | translate}}</label>
					  	</div>
					  	<div class="cui-radio cui-radio--basic-rtl">
						    <input class="cui-radio__input" type="radio" name="radio-choice-basic" id="radio-choice-2" value="choice-2">
						    <label class="cui-radio__label" for="radio-choice-2"><span></span>{{'yes' | translate}}</label>
					  	</div>

				  	</div>

				  	<div class="cui-actions__edit-controls">
				  		<a class="cui-actions__edit-controls--link" href="#">{{'edit' | translate}}</a>
				  		<a class="cui-actions__edit-controls--link" href="">{{'suspend' | translate}}</a>
				  	</div>

			  	</div>

					<p class="message">
						{{grant.person.name.given}} doesnâ€™t currently have the role of application administrator, which must be assigned before a user can be granted administration rights for a given application. This is one time setting.
					</p>

					<div class="cui-actions cui-actions--confirm">
						<p class="cui-actions--confirm__text">Would you like to assign this role now?</p>
						<a class="cui-actions--confirm__button cui-actions--confirm__link" href="#" class="cancel">{{'cancel' | translate}}</a>
						<button class="cui-button cui-actions--confirm__button">{{'yes' | translate}}</button>
					</div>

				</div>


			<!-- 
		  SUSPEND EXPANDABLE (ZEPLIN 30b) 
		  -->
		  <div class="cui-expandable__content cui-edit-user">
		  	<!-- Close Icon -->
		  	<div class="collapse" ng-click="collapse()">
		  		<cui-icon cui-svg-icon="cui:close-no-fill" svg-class="cui-action__icon" preserveAspectRatio="xMidYMid meet"></cui-icon>
		  	</div>

		  	<div class="cui-actions">
		  		<div class="cui-actions__edit-controls">
			  		<a class="cui-actions__edit-controls--link" href="#">{{'edit' | translate }}</a>
			  		<a class="cui-actions__edit-controls--link" href="">{{'suspend' | translate}}</a>
			  	</div>
		  	</div>

		  	<p class="message">
		  		{{grant.person.name.given}} will be unable to access this application
		  	</p>
  
				<div class="cui-actions cui-actions--confirm">
					<p class="cui-actions--confirm__text">Are you sure you'd like to suspend now?</p>
					<div class="cui-actions--confirm__checkbox"><input class="cui-checkbox" type="checkbox" id="option-1"/><label class="cui-checkbox__label" for="option-1">Notify User</label></div>
					<a class="cui-actions--confirm__button cui-actions--confirm__link" href="#" class="cancel">{{'cancel' | translate}}</a>
					<button class="cui-button cui-actions--confirm__button">{{'yes' | translate}}</button>
				</div>
		  </div>


		  <!-- 
			ADMIN SELECT EXPANDABLE (ZEPLIN 30d)
			-->
		  <div class="cui-expandable__content cui-edit-user">
		  	<div class="collapse" ng-click="collapse()">
		  		<cui-icon cui-svg-icon="cui:close-no-fill" svg-class="cui-action__icon" preserveAspectRatio="xMidYMid meet"></cui-icon>
		  	</div>

		  	<div class="cui-actions">

			  	<div class="cui-actions__admin-select">		  		
			  		<span>Administrator</span>

			  		<div class="cui-radio cui-radio--basic-rtl">
					    <input class="cui-radio__input" type="radio" name="radio-choice-basic" id="radio-choice-2" value="choice-2">
					    <label class="cui-radio__label" for="radio-choice-2"><span></span>{{'no' | translate}}</label>
				  	</div>
				  	<div class="cui-radio cui-radio--basic-rtl">
					    <input class="cui-radio__input" type="radio" name="radio-choice-basic" id="radio-choice-2" value="choice-2">
					    <label class="cui-radio__label" for="radio-choice-2"><span></span>{{'yes' | translate}}</label>
				  	</div>
			  	</div>

			  	<div class="cui-actions__edit-controls">
			  		<a class="cui-actions__edit-controls--link" href="#">{{'edit' | translate}}</a>
			  		<a class="cui-actions__edit-controls--link" href="">{{'unsuspend' | translate}}</a>
			  		<a class="cui-actions__edit-controls--link" href="">{{'remove' | translate}}</a>
			  	</div>

				</div>
		  </div>
		  	
		  </cui-expandable-body>
		</cui-expandable>

</div>