<div class="cui-tile">
  <div class="cui-tile__title">{{'cui-my-profile' | translate}}</div>
  <div class="cui-tile__body">

    <!-- Title -->
    <cui-expandable class="cui-expandable">
      <cui-expandable-title class="cui-expandable__title">
        {{'cui-my-profile' | translate}}

      </cui-expandable-title>
    </cui-expandable>
    
    <!-- User full name -->
    <p>{{usersEdit.user.name.given}} {{usersEdit.user.name.surname}}</p>
    
    <!-- UserID -->
    <p>{{'cui-user-id' | translate}}: {{usersEdit.user.id}}</p>
    <p>{{'cui-registered' | translate}}:</p>

    <!-- Full Name -->
    <p ng-if="!usersEdit.editName">
      {{"cui-name"| translate}}:
      <span ng-if="!usersEdit.editName">
        {{usersEdit.user.name.given}} {{usersEdit.user.name.surname}}
      </span>
      <a class='c' ng-click="usersEdit.editName = !usersEdit.editName">Edit</a>
    </p>

    <div ng-if="usersEdit.editName">
      <p>{{'cui-first-name' | translate}}
        <input type="text" ng-init="usersEdit.tempGiven = usersEdit.user.name.given" ng-model="usersEdit.tempGiven"></input>
      </p>
      
      <p>{{'cui-last-name' | translate}}
        <input type="text" ng-init="usersEdit.tempSurname = usersEdit.user.name.surname" ng-model="usersEdit.tempSurname"></input>
      </p>

      <div>
        <span ng-click="usersEdit.saveFullName()">{{'cui-save' | translate}}</span>
        <span ng-click="usersEdit.editName=false">{{'cui-cancel' | translate}}</span>
      </div>
    </div>

    <!-- User ID -->
    <p>{{'cui-user-id' | translate}}: {{usersEdit.user.id}}</p>
    <!-- Email -->
    <inline-edit label="cui-email" model="usersEdit.user.email"></inline-edit>
    <!-- Password -->
    <inline-edit label="cui-password" model=""></inline-edit>
    <!-- Challenge Question 1 -->
    <inline-edit name="{{'cui-challenge-question' | translate}} 1" model="usersEdit.user.challengeQuestion1"></inline-edit>
    <!-- Challenge Question 1 -->
    <inline-edit name="{{'cui-challenge-question' | translate}} 2" model="usersEdit.user.challengeQuestion2"></inline-edit>

{{usersEdit.user.addresses}}

    <!-- Address -->
    <p>{{'cui-address' | translate}}
      <a class="cui-link" href="" ng-if="!usersEdit.editAddress" ng-click="usersEdit.editAddress=true">{{'cui-expand' | translate}}</a>
      <a class="cui-link" href="" ng-if=" usersEdit.editAddress" ng-click="usersEdit.editAddress=false">{{'cui-close' | translate}}</a>
    </p>

    <div ng-if='usersEdit.editAddress'>
      <!-- Street Address -->  
      <label for="{{'cui-street-address' | translate}}">{{'cui-street-address' | translate}}</label>
      <input type="text" name="{{'cui-street-address' | translate}}" class="cui-input" ng-model="usersEdit.tempStreetAddress">

      <!-- Address 2 -->
      <label for="{{'cui-address-2' | translate}}">{{'cui-address-2' | translate}}</label>
      <input type="text" name="{{'cui-address-2' | translate}}" ng-model="usersEdit.tempAddress2" class="cui-input">

      <div class="cui-form__field-row">
        <!-- City -->
        <div class="cui-form__field-container cui-form__field-container--half">
          <label for="{{'cui-city' | translate}}">{{'cui-city' | translate}}</label>
          <input type="text" name="{{'cui-city' | translate}}" class="cui-input" ng-model="usersEdit.tempCity">
        </div>

        <!-- ZIP -->
        <div class="cui-form__field-container cui-form__field-container--half">
          <label for="{{'cui-zip' | translate}}">{{'cui-zip' | translate}}</label>
          <input type="text" name="{{'cui-zip' | translate}}" class="cui-input" ng-model="usersEdit.tempZIP">
        </div>
      </div>

      <!-- Country -->
      <div class="cui-wizard__field-container">
        <label for="country">{{"cui-country" | translate}}</label>
        <div class="cui-error" ng-messages="user.country.$error" ng-if="user.country.$touched">
          <div ng-messages-include="assets/angular-templates/messages.html"></div>
        </div>
        <div auto-complete input-name="country" pause="100" selected-object="usersEdit.user.Country" initial-value="usersEdit.tempCountry" local-data="base.countries" search-fields="name" title-field="name" input-class="cui-input" match-class="highlight" auto-match="true"></div>
      </div>

      <a class="cui-link" href="" ng-click="usersEdit.resetTempAddress()">cancel</a>
      <!-- Update -->
      <button class="cui-button" ng-click="usersEdit.saveAddress()">{{'cui-update' | translate}}</button>
    </div>
  </div>
</div>
