<form name="signOn" novalidate>
  <ng-include src="'assets/angular-templates/loading.html'" class="fill" ng-class="usersRegister.loading? 'show' : ''"></ng-include>

  <!-- These 2 inputs are here to make sure chrome doesn't auto suggest -->
  <input style="display:none">
  <input type="password" style="display:none">
  <!-- User ID -->
  <label for="userID">User ID</label> 
  <div class="cui-error" ng-messages="signOn.username.$error" ng-if="signOn.username.$touched">
    <div ng-messages-include="assets/angular-templates/messages.html"></div>
  </div>
  <input type="text" name="username" class="cui-input" ng-required="true" ng-model="usersRegister.userLogin.username" />

  
  <div class="cui-wizard__field-row">
    <div class="cui-wizard__field-container cui-wizard__field-container--half ">

      <!-- Password -->
      <div class="cui-input__password-holder">
        <label for="password1">{{'cui-password' | translate}}</label>
        <input type="password" name="password1" ng-model="usersRegister.userLogin.password" class="cui-input  cui-input__password" ng-required="true" ng-class="{'cui-input--error': signOn.password1.$touched && signOn.password1.$invalid}" password-validation="{{usersRegister.passwordPolicies}}" autocomplete="Off"/>
        <div class="cui-error__password" ng-messages="signOn.password1.$error" ng-messages-multiple ng-if="signOn.password1.$invalid">
          <div ng-messages-include="assets/angular-templates/password-messages.html"></div>
        </div>
      </div>
    </div>
    

    <div class="cui-wizard__field-container cui-wizard__field-container--half">
      <!-- password confirm -->
      <div class="cui-input__password-holder">
        <label for="password2">{{'cui-password-re' | translate}}</label>
        <div class="cui-error" ng-if="signOn.password2.$error.match && signOn.password2.$touched">
          Passwords must match
        </div>
        <input type="password" name="password2" ng-model="usersRegister.userLogin.password2" class="cui-input cui-input__password" ng-class="{'cui-input--error': (usersRegister.userLogin.password!==usersRegister.userLogin.password2 && ignOn.password2.$touched)}" ng-required="true" match="usersRegister.userLogin.password"/>
      </div>
    </div>
  </div>

  <div class="cui-wizard__field-row">
    <!-- Challenge question 1 -->
    <div class="cui-wizard__field-container cui-wizard__field-container--half ">
      <label for="challengeQuestion1">Challenge Question 1</label>
      <div class="cui-error" ng-messages="signOn.challenge1.$error" ng-if="signOn.challenge1.$touched">
        <div ng-messages-include="assets/angular-templates/messages.html"></div>
      </div>
      <select ng-model="usersRegister.userLogin.question1" name="challenge1" ng-required="true" class="cui-select" ng-class="{'cui-input--error': signOn.challenge1.$touched && signOn.challenge1.$invalid}" ng-options="question as question.question[0].text for question in usersRegister.userLogin.challengeQuestions1 track by question.id">
      </select>
    </div>

    <!-- Challenge answer 1 -->
    <div class="cui-wizard__field-container cui-wizard__field-container--half ">
      <label for="challengeAnswer1">Challenge Answer 1</label>
      <div class="cui-error" ng-messages="signOn.answer1.$error" ng-if="signOn.answer1.$touched">
        <div ng-messages-include="assets/angular-templates/messages.html"></div>
      </div>
      <input type="text" name="answer1" class="cui-input" ng-model="usersRegister.userLogin.challengeAnswer1" ng-required="true" /> 
    </div>
  </div>

  <!-- Challenge question 2 -->
  <div class="cui-wizard__field-row">
    <div class="cui-wizard__field-container cui-wizard__field-container--half ">
      <label for="challengeQuestion2">Challenge Question 2</label>
      <div class="cui-error" ng-messages="signOn.challenge2.$error" ng-if="signOn.challenge2.$touched">
        <div ng-messages-include="assets/angular-templates/messages.html"></div>
      </div>
      <select ng-model="usersRegister.userLogin.question2" name="challenge2" ng-required="true" class="cui-select" ng-class="{'cui-input--error': signOn.challenge2.$touched && signOn.challenge2.$invalid}" ng-options="question as question.question[0].text for question in usersRegister.userLogin.challengeQuestions2 track by question.id">
      </select>
    </div>

    <!-- Challenge answer 2 -->
    <div class="cui-wizard__field-container cui-wizard__field-container--half ">
      <label for="challengeAnswer2">Challenge Answer 2</label>
      <div class="cui-error" ng-messages="signOn.answer2.$error" ng-if="signOn.answer2.$touched">
        <div ng-messages-include="assets/angular-templates/messages.html"></div>
      </div>
      <input type="text" name="answer2" class="cui-input" ng-model="usersRegister.userLogin.challengeAnswer2" ng-required="true" /> 
    </div>
  </div>

  <div class="cui-wizard__controls">
    <!-- go to assets/js/app/app.profile.js to customize this function -->
    <button class="cui-wizard__previous" ng-click="previous()"><< {{'cui-previous' | translate}}</button>
    <button class="cui-wizard__next" ng-click="usersRegister.finish(signOn)" ng-class="signOn.$invalid? 'cui-wizard__next--error' : usersRegister.registrationError? 'fail' :  ''" style="position:relative">
      <div class="cui-loading--medium__center" ng-show="usersRegister.registering"></div>
      <span ng-if="!usersRegister.registering && !usersRegister.registrationError">Finish</span>
      <span ng-if="usersRegister.registrationError">Error! Try again?</span>
    </button>
  </div>
</form>