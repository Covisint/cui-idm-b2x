<form name="user" novalidate>
  <p>{{"cui-all-fields-required" | translate}}. {{"cui-complete-registration" | translate}}
    <a href='' class="cui-link--medium-light cui-link--no-decoration" ng-click='usersRegister.applications.toggleCovisintInfo()'> <!-- usersRegister.showCovisintInfo = true -->
      Covisint SF.
      <div ng-include="'assets/angular-templates/popover.html'"></div>
    </a>
  </p>
  
  <!-- First row -->
  <div class="cui-wizard__field-row">
    <!-- First Name -->     
    <div class="cui-wizard__field-container cui-wizard__field-container--half">
      <label for="user-name-given">{{'cui-first-name' | translate}}</label> 
      <div class="cui-error" ng-messages="user.firstName.$error" ng-if="user.firstName.$touched">
        <div ng-messages-include="assets/angular-templates/messages.html"></div>
      </div>
      <input type="text" name="firstName" class="cui-input" ng-required="true" ng-model="usersRegister.user.name.given"/>
    </div>

    <!-- Last Name -->
    <div class="cui-wizard__field-container cui-wizard__field-container--half">
      <label for="user-name-surname">{{'cui-last-name' | translate}}</label>
      <div class="cui-error" ng-messages="user.lastName.$error" ng-if="user.lastName.$touched">
        <div ng-messages-include="assets/angular-templates/messages.html"></div>
      </div>
      <input type="text" ng-model="usersRegister.user.name.surname" name="lastName" class="cui-input" ng-required="true"/>
    </div>
  </div>

  <!-- Second row -->
  <div class="cui-wizard__field-row"> 
    <!-- Country -->
    <div class="cui-wizard__field-container cui-wizard__field-container--half">
      <label for="country">{{"cui-country" | translate}}</label>
      <div class="cui-error" ng-messages="user.country.$error" ng-if="user.country.$touched">
        <div ng-messages-include="assets/angular-templates/messages.html"></div>
      </div>
      <div auto-complete input-name="country" pause="100" selected-object="usersRegister.user.addresses[0].country" local-data="base.countries" search-fields="name" title-field="name" input-class="cui-input" match-class="highlight" auto-match="true" field-required="usersRegister.user.addresses[0].country"></div>
    </div>
  
    <!-- Address 1 -->
    <div class="cui-wizard__field-container cui-wizard__field-container--half">
      <label>{{"cui-address" | translate}} 1</label>
      <input type="text" ng-model="usersRegister.user.addresses[0].streets[0]" class="cui-input" name="address1">
    </div>
  </div>

  <!-- Third row -->
  <div class="cui-wizard__field-row"> 
    <!-- Address 2 -->
    <div class="cui-wizard__field-container cui-wizard__field-container--half">
      <label >{{"cui-address" | translate}} 2</label>
      <input type="text" ng-model="usersRegister.user.addresses[0].streets[1]" class="cui-input" name="address1" placeholder="Apt, Suite, Bldg. (optional)">
    </div>

    <!-- City -->
    <div class="cui-wizard__field-container cui-wizard__field-container--half">
      <label>{{"cui-city" | translate}}</label>
      <input type="text" ng-model="usersRegister.user.addresses[0].city" class="cui-input" name="city"></input>
    </div>
  </div>

  <!-- Fourth row -->
  <div class="cui-wizard__field-row"> 
    <!-- State/Province -->
    <div class="cui-wizard__field-container cui-wizard__field-container--half">
      <label>{{"cui-state" | translate}}</label>
      <input type="text" ng-model="usersRegister.user.addresses[0].state" class="cui-input" name="state"></input>
    </div>

    <!-- Postal Code -->
    <div class="cui-wizard__field-container cui-wizard__field-container--half">
      <label for="postal-code">{{"cui-postal" | translate}}</label>
      <input type="text" ng-model="usersRegister.user.addresses[0].postal" class="cui-input" name="postal"/>
    </div>
  </div>

  <!-- Fifth row -->
  <div class="cui-wizard__field-row">
    <!-- Telephone number -->
    <div class="cui-wizard__field-container cui-wizard__field-container--half">
      <label>{{"cui-telephone" | translate}}</label>
      <input type="text" ng-model="usersRegister.user.phones[0].number" class="cui-input" name="postal"/>
    </div>
  </div>

  <!-- TOS -->
  <input type="checkbox" name="TOS"  ng-model="usersRegister.tos" ng-required="true">
  <label for="TOS"> {{'cui-agree-covisint' | translate}} <a href="" class="cui-link--medium-light cui-link--no-decoration">{{'terms-of-service' | translate}}</a> {{'cui-and' | translate}} <a href="" class="cui-link--medium-light cui-link--no-decoration">{{'privacy-policy' | translate}}</a></label>
  <span class="cui-error" ng-if="user.TOS.$error.required && user.TOS.$touched"><br><br> {{'cui-tos-agree' | translate}} </span>

</form>

<div class="cui-wizard__controls">
  <button class="cui-wizard__next" ng-click="nextWithErrorChecking(user)" ng-class="(user.$invalid)? 'cui-wizard__next--error' : ''">{{'cui-next' | translate}}</button>
</div>
