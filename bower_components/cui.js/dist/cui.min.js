/*! cui 20-11-2015 */
!function(){"use strict";cui.VERSION="0.3.3",cui.supportsLocalStorage=function(){var a="testlocal";try{return localStorage.setItem(a,a),localStorage.removeItem(a),!0}catch(b){return!1}},cui.supportsBeforeunload=function(){return cui.supportsLocalStorage()&&"yes"===localStorage.getItem(h)?!0:!1};for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b);Function.prototype.bind?cui.log=Function.prototype.bind.call(e.log,e):cui.log=function(){Function.prototype.apply.call(e.log,e,arguments)};var f=cui.log;if(cui.enableLog=function(){cui.log=f},cui.disableLog=function(){cui.log=b},cui.disableLog(),cui.supportsLocalStorage()){var g=localStorage.getItem("cui.log");g&&cui.enableLog()}var h="supportsBeforeunload";cui.supportsLocalStorage()&&!localStorage.getItem(h)&&($(window).on("beforeunload",function(){localStorage.setItem(h,"yes")}),$(window).on("unload",function(){localStorage.getItem(h)||localStorage.setItem(h,"no")}));var i=!1;$(window).on("beforeunload",function(){i=!0}),cui.parseError=function(a){var b=a.statusText;return b.length||(b=$.parseJSON(a.responseText)),b},cui.ajax=function(a){var b=a.url||"",c=a.async===!1?!1:!0,d=a.type||"GET",e=a.beforeSend||null,f=a.accepts||"",g=a.contentType||"",h=a.dataType||"json",j=a.data||null,k=a.dataFilter||null,l=a.converters||{},m=a.complete||null,n=a.error||null,o=a.success||null;return b.length?(cui.log("cui.ajax sending",b,a),$.ajax({url:b,type:d,async:c,beforeSend:e,accepts:{text:f,json:f},data:j,contentType:g,dataType:h,dataFilter:k,converters:l,error:n,complete:m,success:o}).then(null,function(a,b,c){if(cui.log("ajax.then(fail): status="+b+" : err="+c+" : xhr="+a.responseText+"."),""===a.responseText){cui.log("ajax.then(fail):resolve()");var d=[];return $.Deferred().resolve(d,b,a)}return cui.log("ajax.then(fail):reject()"),$.Deferred().reject(a,b,c)}).done(function(a,b,c){cui.log("ajax.done:"+b)}).fail(function(a,b,c){function d(){cui.log("ajax.fail: status="+b+" : err="+c+" : xhr="+a.responseText)}cui.supportsBeforeunload()?i||d():setTimeout(function(){d()},1e3)}).always(function(a,b,c){})):void 0},cui.util={},cui.util.hello=function(){cui.log("hello util")},cui.util.toTitleCase=function(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})},cui.util.qs=function(a){if(""===a)return{};for(var b={},c=0;c<a.length;++c){var d=a[c].split("=");2===d.length&&(b[d[0]]=decodeURIComponent(d[1].replace(/\+/g," ")))}return b}(window.location.search.substr(1).split("&")),cui.api=function(){function a(){var a=window.localStorage.getItem("accessToken");return a||(a=b()),a}function b(){return da}function c(a){var b=_.find(ea,function(b){return b.cmd===a});return b}function d(a,b){var d="",e=c(a);return e&&(d=_.cloneDeep(e),d.accepts=B.replace(C,d.accepts),d.acceptsSuffix&&(d.accepts=d.accepts+d.acceptsSuffix),d.call=d.call.replace(D,Q),d.call=d.call.replace(E,R),d.call=d.call.replace(I,T),d.call=d.call.replace(G,X),d.call=d.call.replace(J,U),d.call=d.call.replace(K,V),d.call=d.call.replace(F,S),d.call=d.call.replace(L,W),d.call=d.call.replace(H,Y),d.call=d.call.replace(M,Z),d.call=d.call.replace(N,aa),d.call=d.call.replace(O,ba),d.call=d.call.replace(P,ca)),b&&b.params&&_.each(b.params,function(a){var b;b=-1===d.call.indexOf("?")?"?":"&";var c=b+a.name+"="+a.value;d.call=d.call+c}),d}function e(b,c){var d=decodeURIComponent(a()),e=c;return e.url=b,e.beforeSend=function(a,b){a.setRequestHeader("Authorization","Bearer "+d)},e.contentType="application/x-www-form-urlencoded",e.type="POST",e.data={token:d,token_type_hint:"",cascade:"true"},cui.ajax(e)}function f(a,b){var c=b,d=btoa(c.clientId+":"+c.clientSecret);return c.url=a,c.beforeSend=function(a,b){a.setRequestHeader("Authorization","Basic "+d)},c.contentType="application/x-www-form-urlencoded",c.type="POST",c.data={grant_type:"client_credentials",scope:"all"},cui.ajax(c)}function g(b,c){var d=decodeURIComponent(a()),e=c;return e.url=b,e.beforeSend=function(a,b){a.setRequestHeader("Authorization","Bearer "+d)},cui.ajax(e)}function h(a,b){var c=400,d=650,e=200,f=200,g="Auth",h="toolbar=no, location=no, directories=no, status=no, menubar=no, copyhistory=no, ",i="width="+c+", height="+d+", top="+e+", left="+f,j=h+i;return window.open(a,g,j)}function i(){var a="";return-1!==window.location.hash.indexOf("access_token")?a=window.location.hash.match(/access_token=(.*)$/)[1].split("&state")[0]:-1!==window.location.hash.indexOf("access_denied")&&(a="deny"),a}function j(a,b){b||(b={}),k(b);var c,i=d(a);return i&&("popup"===i.cmdType?c=h(i.call,b):"auth"===i.cmdType?c=f(i.call,b):"revoke"===i.cmdType?c=e(i.call,b):(b.accepts=i.accepts,b.data&&(b.contentType=i.accepts),c=g(i.call,b))),l(b),c}function k(a){a&&(a.idmIdentityUrl&&(Q=a.idmIdentityUrl),a.idmServiceUrl&&(R=a.idmServiceUrl),a.userId&&(S=a.userId),a.companyId&&(T=a.companyId),a.organizationId&&(X=a.organizationId),a.packageId&&(U=a.packageId),a.roleId&&(V=a.roleId),a.requestId&&(W=a.requestId),a.deviceTemplateId&&(Y=a.deviceTemplateId),a.clientId&&(Z=a.clientId),a.responseType&&(aa=a.responseType),a.scope&&(ba=a.scope),a.state&&(ca=a.state))}function l(a){a&&(a.idmIdentityUrl&&(Q=""),a.idmServiceUrl&&(R=""),a.userId&&(S=""),a.companyId&&(T=""),a.organizationId&&(X=""),a.packageId&&(U=""),a.roleId&&(V=""),a.requestId&&(W=""),a.deviceTemplateId&&(Y=""),a.clientId&&(Z=""),a.responseType&&(aa=""),a.scope&&(ba=""),a.state&&(ca=""))}var m="cuijs",n="IURL",o="SURL",p="UID",q="CID",r="OID",s="PID",t="DTID",u="RID",v="RQID",w="CLIT",x="RTT",y="SCT",z="STT",A="AT",B="application/vnd.com.covisint.platform."+A+"+json",C=new RegExp(A,"g"),D=new RegExp(n,"g"),E=new RegExp(o,"g"),F=new RegExp(p,"g"),G=new RegExp(r,"g"),H=new RegExp(t,"g"),I=new RegExp(q,"g"),J=new RegExp(s,"g"),K=new RegExp(u,"g"),L=new RegExp(v,"g"),M=new RegExp(w,"g"),N=new RegExp(x,"g"),O=new RegExp(y,"g"),P=new RegExp(z,"g"),Q="",R="",S="",T="",U="",V="",W="",X="",Y="",Z="",aa="",ba="",ca="",da="",ea=[];return ea.push({cmd:"IDM_LOGOUT",name:"Idm Logout",cmdType:"popup",call:n+"/logout.do"}),ea.push({cmd:"GET_AUTH",name:"Get Authorization",cmdType:"popup",call:o+"/oauth/v3/authorization?client_id="+w+"&response_type="+x+"&scope="+y+"&state="+z}),ea.push({cmd:"POST_AUTH",name:"Get Sys-level Authorization",cmdType:"auth",call:o+"/oauth/v3/token"}),ea.push({cmd:"POST_AUTH_REVOKE",name:"Revoke Authorization",cmdType:"revoke",call:o+"/oauth/v3/revoke"}),ea.push({cmd:"GET_ORGS",name:"Get Organizations",accepts:"organization.v1",call:o+"/organization/v1/organizations"}),ea.push({cmd:"GET_ORG",name:"Get Organization",accepts:"organization.v1",call:o+"/organization/v1/organizations/"+r}),ea.push({cmd:"GET_USERS",name:"Get Users",accepts:"person.v1",call:o+"/person/v1/persons"}),ea.push({cmd:"GET_SPS",name:"Get Packages",accepts:"package.v1",call:o+"/service/v1/packages"}),ea.push({cmd:"GET_SP_SPS",name:"Get Package Services",accepts:"service.v1",call:o+"/service/v1/packages/"+s+"/services"}),ea.push({cmd:"POST_SP",name:"Create Service",accepts:"service.v1",call:o+"/service/v1/services"}),ea.push({cmd:"POST_SP_SP",name:"Assign Service to Package",accepts:"service.v1",call:o+"/service/v1/packages/tasks/assignServiceMembership"}),ea.push({cmd:"GET_USER_SPS",name:"Get User Packages",accepts:"package.grant.v1",call:o+"/service/v1/persons/"+p+"/packages"}),ea.push({cmd:"PUT_SP_USER",name:"Grant Package to User",accepts:"package.grant.v1",call:o+"/service/v1/persons/"+p+"/packages/"+s}),ea.push({cmd:"GET_ORG_SP",name:"Get Organization Packages",accepts:"package.grant.v1",call:o+"/service/v1/organizations/"+r+"/packages/"+s}),ea.push({cmd:"GET_APPS",name:"Get Applications",accepts:"application.v1",call:o+"/application/v1/applications"}),ea.push({cmd:"GET_DEVICES",name:"Get Devices",accepts:"device.v1",acceptsSuffix:";fetchattributetypes=true;fetcheventtemplates=true;fetchcommandtemplates=true",call:o+"/device/v2/devices"}),ea.push({cmd:"POST_DEVICE_FROM_TEMPL",name:"Create Device from Template",accepts:"device.v1",call:o+"/device/v2/tasks/createDeviceFromTemplate?deviceTemplateId="+t}),ea.push({cmd:"GET_DEVICE_TEMPL",name:"Get Device Templates",accepts:"deviceTemplate.v1",acceptsSuffix:";fetchattributetypes=true;fetcheventtemplates=true;fetchcommandtemplates=true",call:o+"/devicetemplate/v1/deviceTemplates"}),ea.push({cmd:"POST_DEVICE_TEMPL",name:"Get Device Templates",accepts:"deviceTemplate.v1",call:o+"/devicetemplate/v1/deviceTemplates"}),ea.push({cmd:"GET_EVENT_SRC",name:"Get Event Sources",accepts:"eventSource.v1",call:o+"/eventsource/v1/eventSources"}),ea.push({cmd:"GET_EVENT_TEMPL",name:"Get Event Templates",accepts:"eventTemplate.v1",call:o+"/eventtemplate/v1/eventTemplates"}),ea.push({cmd:"GET_ATTR_TYPE",name:"Get Attribute Types",accepts:"attributeType.v1",call:o+"/attributetype/v1/attributeTypes"}),{getDataCalls:function(){return ea},doCall:function(){return j.apply(null,arguments)},setService:function(a){"STG"===a?R="https://apistg.np.covapp.io":"PREPRD"===a||"PRD"===a&&(R="https://api.us1.covisint.com")},getOrganization:function(a){return a||(a={}),j("GET_ORG",a)},getOrganizations:function(a){return a||(a={}),j("GET_ORGS",a)},getUsers:function(a){return a||(a={}),j("GET_USERS",a)},getPackages:function(a){return a||(a={}),j("GET_SPS",a)},getPackageServices:function(a){return a||(a={}),j("GET_SP_SPS",a)},createService:function(a){return a||(a={}),a.type="POST",j("POST_SP",a)},assignService:function(a){return a||(a={}),a.type="POST",j("POST_SP_SP",a)},grantPackageOrg:function(a){return a||(a={}),a.type="PUT",j("GET_ORG_SP",a)},getOrganizationPackages:function(a){return a||(a={}),j("GET_ORG_SP",a)},grantPackage:function(a){return a||(a={}),a.type="PUT",j("PUT_SP_USER",a)},getUserPackages:function(a){return a||(a={}),j("GET_USER_SPS",a)},getApplications:function(a){return a||(a={}),j("GET_APPS",a)},createApplication:function(a){return a||(a={}),a.type="POST",j("GET_APPS",a)},getDevices:function(a){return a||(a={}),j("GET_DEVICES",a)},createDeviceFromTemplate:function(a){return a||(a={}),a.type="POST",j("POST_DEVICE_FROM_TEMPL",a)},getDeviceTemplates:function(a){return a||(a={}),j("GET_DEVICE_TEMPL",a)},createDeviceTemplate:function(a){return a||(a={}),a.type="POST",j("POST_DEVICE_TEMPL",a)},getEventSources:function(a){return a||(a={}),j("GET_EVENT_SRC",a)},getEventTemplates:function(a){return a||(a={}),j("GET_EVENT_TEMPL",a)},createEventTemplate:function(a){return a||(a={}),a.type="POST",j("GET_EVENT_TEMPL",a)},getAttributeTypes:function(a){return a||(a={}),j("GET_ATTR_TYPE",a)},createAttributeType:function(a){return a||(a={}),a.type="POST",j("GET_ATTR_TYPE",a)},handleAuthResponse:function(){var a=i();a.length&&(window.localStorage.removeItem("accessToken"),window.localStorage.setItem("accessToken",a),window.close())},getToken:function(){return a()},clearToken:function(){window.localStorage.removeItem("accessToken")},doSysAuth:function(a){return a||(a={}),j("POST_AUTH",a).done(function(a){cui.log("POST_AUTH success",a);var b="access_token",c=a[b];c.length&&(window.localStorage.removeItem("accessToken"),window.localStorage.setItem("accessToken",c),da=c)})},doRevoke:function(a){return a||(a={}),j("POST_AUTH_REVOKE",a).done(function(a){cui.log("POST_AUTH_REVOKE success",a),window.localStorage.removeItem("accessToken")})},doAuth:function(a){return j("GET_AUTH",a)},doThreeLeggedOAuth:function(b){function c(b,c){if(cui.log("waiting",b,c),c.closed!==!1){clearInterval(f);var d=a();if(d){if("deny"!==d)return b.resolve(d);b.reject()}else b.reject()}}b||(b={}),b.responseType="token",b.state=m,b.scope||(b.scope="all"),window.localStorage.removeItem("accessToken");var d=$.Deferred(),e=j("GET_AUTH",b),f=setInterval(function(){c(d,e)},500);return d},doIdmLogout:function(a){return a||(a={}),j("IDM_LOGOUT",a)},sayHello:function(){cui.log("hello api")},sayDeferred:function(a,b,c){var d=$.Deferred(),e=c;return cui.log(a),"fail"===a?(d.rejectWith(e,arguments),d.fail(b).promise()):(d.resolveWith(e,arguments),d.done(b).promise())},sayDeferredConfig:function(a){var b=$.Deferred(),c={message:"what do you say?",callback:null,context:null,delay:0};return $.extend(!0,c,a),_.delay(function(){cui.log(c.message),"fail"===c.message?(_.isFunction(c.callback)&&c.callback.call(c.context,arguments),b.rejectWith(c.context,arguments)):(_.isFunction(c.callback)&&c.callback.call(c.context,arguments),b.resolveWith(c.context,arguments))},c.delay),cui.log("sayDeferredConfig"),b.promise()},duh:function(){}}},cui.web=function(){function a(a,b,c,d){cui.log("dataFailure:",c,d)}function b(a){var b=_.find(ea,function(b){return b.cmd===a});return b}function c(a){var c="",d=b(a);return d&&(c=_.cloneDeep(d),c.call=c.call.replace(u,A),c.call=c.call.replace(w,C),c.call=c.call.replace(x,D),c.call=c.call.replace(y,E),c.call=c.call.replace(v,B),c.call=c.call.replace(z,F)),c}function d(a){var b=$("<dummy>").append($.parseHTML(a)),c=$(b).find('table[width="100%"]');return $(c).find("tr:has(td.sectionHeader)").remove(),$(c).find("tr:has(td.sectionSubheader)").remove(),$(c).find('tr:has(td:contains(" = uses site codes"))').remove(),$(c).find('td.tableDataUnderscoreSel[width="1%"]').remove(),$(c).find('td[colspan="3"]').attr("colspan","1"),c}function e(a,b){var c=a.replace("<!doctype html>","");return c=c.replace(/[\n\r]+/g,""),c=c.replace(/[\t]+/g," "),c=c.replace(/<!--[\s\S]*?-->/g,""),c=c.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""),c=c.replace(/<img [^>]*src=['"]([^'"]+)[^>]*>/gi,""),c=c.replace(/&#x2f;/g,"/"),c=c.replace(/&#x20;/g," ")}function f(a){B=a.match(/userId\=(.[\d]+)&/)[1],C=a.match(/companyId\=(.[\d]+)&/)[1],cui.log("set",B,C)}function g(a){k(a);var b=c("HOME"),d=a?_.cloneDeep(a):{},e=d;e.restURL=b.call,e.dataType="html",e.success=[f],a&&e.success.push(a.success),cui.ajax(e),l(a)}function h(a,b,c,f){var g=f;g.restURL=a,g.dataType="html datatables ccajson appjson",g.dataFilter=e,g.converters={"text datatables":d,"datatables ccajson":b||W,"ccajson appjson":c||G},cui.ajax(g)}function i(a,b){var c=b;c.restURL=a,c.dataType="json",cui.ajax(c)}function j(b,d){k(d);var e=c(b);e?"json"===e.type?i(e.call,d):h(e.call,e.converter2,e.converter3,d):a("No such command:"+b),l(d)}function k(a){a&&(a.appServerUrl&&(A=a.appServerUrl),a.userId&&(B=a.userId),a.companyId&&(C=a.companyId),a.packageId&&(D=a.packageId),a.roleId&&(E=a.roleId),a.requestId&&(F=a.requestId))}function l(a){a&&(a.appServerUrl&&(A=""),a.userId&&(B=""),a.companyId&&(C=""),a.packageId&&(D=""),a.roleId&&(E=""),a.requestId&&(F=""))}var m="[X1]",n="[PG]",o="SURL",p="UID",q="CID",r="PID",s="RID",t="RQID",u=new RegExp(o,"g"),v=new RegExp(p,"g"),w=new RegExp(q,"g"),x=new RegExp(r,"g"),y=new RegExp(s,"g"),z=new RegExp(t,"g"),A="",B="",C="",D="",E="",F="",G=function(a){return a},H=function(a){var b=a[5];return $.each(b,function(a,c){c["User Name"].length?(c.userId=c.select,c.select=""):b.splice(a,1)}),b},I=function(a){var b=a[4];return $.each(b,function(a,b){b.userId=b["Job Title"],b["Job Title"]=""}),b},J=function(a){var b=a[5];return $.each(b,function(a,c){if(c["audit date"].indexOf("[")>-1){var d=c["audit date"].match(/\[(.[\d]*?)\]/)[1];c.companyId=d,c["audit date"]=c["audit date"].replace(/\[(.[\d]*?)\]/,"").trim()}else b.splice(a,1);c["audit date"].indexOf("No previous")>-1&&(c["audit date"]="")}),b},K=function(a){var b=$.parseJSON('[{"info": [], "categories": []}]'),c=$.parseJSON('{"name": "", "privs": []}'),d=$.parseJSON('{"name":"", "description":"" }'),e={};$.each(a[5],function(a,b){e[b.col1]=b.data1}),b[0].info.push(e);var f=null;return $.each(a[6],function(a,e){if(e.Description.indexOf(n)>-1)f=_.cloneDeep(c),f.name=e.Description.replace(n,""),b[0].categories.push(f);else{var g=_.cloneDeep(d);g.name=e["Privilege Name"],g.description=e.Description,f.privs.push(g)}}),b},L=function(a){var b=a[4];return $.each(b,function(a,b){b.roleId=b["External Role Code"]}),b},M=function(a){var b=a[3];return $.each(b,function(a,c){c.requestId=c["view request"],c.requestId.length?c["view request"]="":b.splice(a,1)}),b},N=function(a){var b=$.parseJSON("[]"),c={};return $.each(a[4],function(a,b){c[b.col1]=b.data1}),b.push(c),b},O=function(a){var b=a[4];return $.each(b,function(a,c){c&&c["request type"].indexOf("no request history")>-1&&b.splice(a,1)}),b},P=function(a){return a[5]},Q=function(a){var b=$.parseJSON('[{"roles": []}]'),c=$.parseJSON('{"name": "", "admins": []}'),d=_.cloneDeep(c);return d.name="Security Administrator",b[0].roles.push(d),$.each(a[4],function(a,b){var c=b;d.admins.push(c)}),d=_.cloneDeep(c),d.name="Organization Service Administrator",b[0].roles.push(d),$.each(a[5],function(a,b){var c=b;d.admins.push(c)}),d=_.cloneDeep(c),d.name="User Account Administrator",b[0].roles.push(d),$.each(a[6],function(a,b){var c=b;d.admins.push(c)}),d=_.cloneDeep(c),d.name="Service Administrator",b[0].roles.push(d),$.each(a[7],function(a,b){var c=b;d.admins.push(c)}),d=_.cloneDeep(c),d.name="Individual Service Administrator",b[0].roles.push(d),$.each(a[8],function(a,b){var c=b;d.admins.push(c)}),b},R=function(a){var b=a[4];return $.each(b,function(a,b){b.packageId=b["more info"],b.packageId.length&&(b["more info"]="")}),b},S=function(a){return a[2]},T=function(a){var b=$.parseJSON("[]"),c={};return $.each(a[4],function(a,b){c[b.col1]=b.data1}),$.each(a[5],function(a,b){c[b.col1]=b.data1}),b.push(c),b},U=function(a){var b=a[4];return $.each(b,function(a,b){b.packageId=b["home location code"],b.packageId.length&&(b["home location code"]="")}),b},V=function(a){var b=$.parseJSON('[{"info": [], "roles": []}]'),c={};return $.each(a[4],function(a,b){c[b.col1]=b.data1}),$.each(a[5],function(a,b){c[b.col1]=b.data1}),b[0].info.push(c),$.each(a[7],function(a,c){b[0].roles.push(c)}),b},W=function(a){var b=[];return $.each(a,function(a,c){var d=null,e=$(c).find("tr:first:has(td.tableDataUnderscore)").length;d=e?$(c).tableToJSON({ignoreEmptyRows:!0,ignoreHiddenRows:!1,headings:["col1","data1","col2","data2"]}):$(c).tableToJSON({ignoreEmptyRows:!0,ignoreHiddenRows:!1}),b.push(d)}),b},X=function(a){var b=[];return $.each(a,function(a,c){var d=$(c).tableToJSON({ignoreEmptyRows:!0,ignoreHiddenRows:!1,textExtractor:{1:function(a,b){var c=b.parent().find("td").eq(0),d=c.find("a").attr("href").match(/roleId\=(.[\d]+)&/)[1];return d}}});b.push(d)}),b},Y=function(a){var b=[];return $.each(a,function(a,c){var d=$(c).tableToJSON({ignoreEmptyRows:!0,ignoreHiddenRows:!1,textExtractor:{1:function(a,b){var c=b.parent().find("td").eq(0).find("a").last().attr("href"),d="";return c&&(d=c.match(/packageId\=(.[\d]+)&/)[1]),d}}});b.push(d)}),b},Z=function(a){var b=[];return $.each(a,function(a,c){var d=$(c).tableToJSON({ignoreEmptyRows:!0,ignoreHiddenRows:!1,textExtractor:{3:function(a,b){var c=b.parent().find("td").eq(1).find("a").last().attr("href"),d="";return c&&(d=c.match(/userId\=(.[\d]+)&/)[1]),d}}});b.push(d)}),b},aa=function(a){var b=[];return $.each(a,function(a,c){var d=$(c).tableToJSON({ignoreEmptyRows:!0,ignoreHiddenRows:!1,textExtractor:{1:function(a,b){var c=b.parent().find("td").eq(0).find("a").last().attr("href"),d="";return c&&(d=c.match(/companyId\=(.[\d]+)&/)[1]),"["+d+"]"+b.text()}}});b.push(d)}),b},ba=function(a){var b=[];return $.each(a,function(a,c){var d=$(c).tableToJSON({ignoreEmptyRows:!0,ignoreHiddenRows:!1,textExtractor:{0:function(a,b){var c=b.find("input").attr("value");return c}}});b.push(d)}),b},ca=function(a){var b=[];return $.each(a,function(a,c){var d,e=$(c).find("tr:first:has(td.tableDataUnderscore)").length;d=e?$(c).tableToJSON({ignoreEmptyRows:!0,ignoreHiddenRows:!1,headings:["col1","data1","col2","data2"]}):$(c).tableToJSON({ignoreEmptyRows:!0,ignoreHiddenRows:!1,textExtractor:{0:function(a,b){return("sectionHeaderAlt"===b.attr("class")?n:"")+b.text()}}}),b.push(d)}),b},da=function(a){var b=[];return $.each(a,function(a,c){var d=$(c).tableToJSON({ignoreEmptyRows:!0,ignoreHiddenRows:!1,textExtractor:{0:function(a,b){var c=b.find("a").last().attr("onclick");return c=c?c.match(/, (.[\d]+)\)/)[1]:""}}});b.push(d)}),b},ea=[];return ea.push({cmd:"HOME",name:"Home",call:o+"/CommonReg/secured?cmd=HOME"}),ea.push({cmd:"LANDING",name:"My Applications",call:o+"/CommonReg/secured?cmd=LANDING"}),ea.push({cmd:"VIEW_USER_PROFILE",name:"View My Profile",call:o+"/CommonReg/secured?cmd=VIEW_USER_PROFILE&userId="+p}),ea.push({cmd:"VIEW_USER_SERVICES",name:"View My Service Packages",converter2:Y,call:o+"/CommonReg/secured?cmd=VIEW_USER_SERVICES&userId="+p}),ea.push({cmd:"VIEW_COMPANY_PROFILE",name:"View Organization Profile",call:o+"/CommonReg/secured?cmd=VIEW_COMPANY_PROFILE&companyId="+q}),ea.push({cmd:"VIEW_PACKAGE_DETAIL",name:"View Service Package Detail",call:o+"/CommonReg/secured?cmd=VIEW_PACKAGE_DETAIL&event=moreInfo&packageId="+r}),ea.push({cmd:"VIEW_COMPANY_SERVICES",name:"View Organization Service Packages",converter2:Y,call:o+"/CommonReg/secured?cmd=VIEW_COMPANY_SERVICES&companyId="+q}),ea.push({cmd:"VIEW_COMPANY_PACKAGE_GRANT_DETAIL",name:"View Organization Service Package",call:o+"/CommonReg/secured?cmd=VIEW_COMPANY_PACKAGE_GRANT_DETAIL&packageId="+r+"&companyId="+q}),ea.push({cmd:"VIEW_USERS",name:"View Organization Users",converter2:Z,call:o+"/CommonReg/secured?cmd=VIEW_USERS&companyId="+q}),ea.push({cmd:"VIEW_COMPANY_ADMINS",name:"View Organization Admins",call:o+"/CommonReg/secured?cmd=VIEW_COMPANY_ADMINS&companyId="+q}),ea.push({cmd:"ORG_PKG_GRTS_LOG",name:"View Organization Package Grant Log",call:o+"/CommonReg/secured?cmd=ORG_PKG_GRTS_LOG&companyId="+q}),ea.push({cmd:"VIEW_PENDING_REQUESTS",name:"View Organization Requests (pending)",call:o+"/CommonReg/secured?cmd=VIEW_PENDING_REQUESTS&companyId="+q+"&subject=company"}),ea.push({cmd:"VIEW_REQUEST_HISTORY",name:"View Organization Requests (non-pending)",call:o+"/CommonReg/secured?cmd=VIEW_REQUEST_HISTORY&companyId="+q+"&subject=company"}),ea.push({cmd:"VIEW_USER_REQUEST",name:"View User request",call:o+"/CommonReg/secured?cmd=VIEW_USER_REQUEST&requestId=2732173&includeSubdivisions=false&approverType=1&requestType=3"}),ea.push({cmd:"VIEW_USER_REQUEST_EXCHANGE",name:"View User request (ex)",call:o+"/CommonReg/secured?cmd=VIEW_USER_REQUEST&requestId=2732166&includeSubdivisions=false&approverType=2&requestType=3"}),ea.push({cmd:"VIEW_USER_REQUEST_PACKAGE",name:"View Service Pkg request",call:o+"/CommonReg/secured?cmd=VIEW_USER_REQUEST&requestId=2734948&includeSubdivisions=false&approverType=1&requestType=9"}),ea.push({cmd:"USER_APPROVAL_QUEUE_USER",name:"Pending User requests",call:o+"/CommonReg/secured?cmd=USER_APPROVAL_QUEUE&approverType=1"}),ea.push({cmd:"USER_APPROVAL_QUEUE_PACKAGE",name:"Pending User service package requests",call:o+"/CommonReg/secured?cmd=USER_APPROVAL_QUEUE&requestType=9&approverType=1"}),ea.push({cmd:"USER_APPROVAL_QUEUE_SITE",name:"Pending User site code requests",call:o+"/CommonReg/secured?cmd=USER_APPROVAL_QUEUE&requestType=12&approverType=1"}),ea.push({cmd:"USER_APPROVAL_QUEUE_USER_EXCHANGE",name:"Pending User requests (exchange)",call:o+"/CommonReg/secured?cmd=USER_APPROVAL_QUEUE&approverType=2"}),ea.push({cmd:"USER_APPROVAL_QUEUE_PACKAGE_EXCHANGE",name:"Pending User service package requests (exchange)",call:o+"/CommonReg/secured?cmd=USER_APPROVAL_QUEUE&requestType=9&approverType=2"}),ea.push({cmd:"COMPANY_APPROVAL_QUEUE",name:"Pending Organization requests",call:o+"/CommonReg/secured?cmd=COMPANY_APPROVAL_QUEUE&approverType=1"}),ea.push({cmd:"COMPANY_APPROVAL_QUEUE_EXCHANGE",name:"Pending Organization requests (exchange)",call:o+"/CommonReg/secured?cmd=COMPANY_APPROVAL_QUEUE&approverType=2"}),ea.push({cmd:"ROLE_MAIN",name:"Manage Roles",converter2:X,call:o+"/CommonReg/secured?cmd=ROLE_MAIN"}),ea.push({cmd:"ROLE_VIEW",name:"Role Details",converter2:ca,call:o+"/CommonReg/secured?cmd=ROLE_VIEW&roleId="+s}),ea.push({cmd:"ROLE_VIEW_USERS",name:"Role Details Users",converter2:ba,call:o+"/CommonReg/secured?cmd=ROLE_VIEW_USERS&roleId="+s}),ea.push({cmd:"VIEW_APPLICATIONS",name:"Get Applications",type:"json",call:o+"/CommonReg/secured?cmd=APPLICATION_JSON&loadType=loadData"}),ea.push({cmd:"AUDIT_USERS_ADMIN_REVIEW",name:"Annual User Grant Audit Report",converter2:aa,call:o+"/CommonReg/secured?cmd=AUDIT_USERS_ADMIN_REVIEW&auditType=2&menu=reports"}),ea.push({cmd:"get_user_info",name:m+"Get User Profile",converter3:V,call:o+"/CommonReg/secured?cmd=VIEW_USER_PROFILE&userId="+p}),ea.push({cmd:"get_user_service_packages",name:m+"Get User Service Packages",converter2:Y,converter3:U,call:o+"/CommonReg/secured?cmd=VIEW_USER_SERVICES&userId="+p}),ea.push({cmd:"get_org_profile",name:m+"Get Organization Profile",converter3:T,call:o+"/CommonReg/secured?cmd=VIEW_COMPANY_PROFILE&companyId="+q}),ea.push({cmd:"get_service_package_detail",name:m+"Get Service Package Detail",converter3:S,call:o+"/CommonReg/secured?cmd=VIEW_PACKAGE_DETAIL&event=moreInfo&packageId="+r}),ea.push({cmd:"get_org_service_packages",name:m+"Get Organization Service Packages",converter2:Y,converter3:R,call:o+"/CommonReg/secured?cmd=VIEW_COMPANY_SERVICES&companyId="+q}),ea.push({cmd:"get_users",name:m+"Get Users",converter2:Z,converter3:I,call:o+"/CommonReg/secured?cmd=VIEW_USERS&companyId="+q}),ea.push({cmd:"get_org_admins",name:m+"Get Organization Admins",converter3:Q,call:o+"/CommonReg/secured?cmd=VIEW_COMPANY_ADMINS&companyId="+q}),ea.push({cmd:"get_org_sp_grants",name:m+"Get Organization Service Package Grants",converter3:P,call:o+"/CommonReg/secured?cmd=ORG_PKG_GRTS_LOG&companyId="+q}),ea.push({cmd:"get_org_req_pending",name:m+"Get Organization Requests (pending)",converter3:O,call:o+"/CommonReg/secured?cmd=VIEW_PENDING_REQUESTS&companyId="+q+"&subject=company"}),ea.push({cmd:"get_org_req_nonpending",name:m+"Get Organization Requests (non-pending)",converter3:O,call:o+"/CommonReg/secured?cmd=VIEW_REQUEST_HISTORY&companyId="+q+"&subject=company"}),ea.push({cmd:"get_site_request",name:m+"Get Site request",converter3:N,call:o+"/CommonReg/secured?cmd=VIEW_USER_REQUEST&requestId="+t+"&includeSubdivisions=false&approverType=1&requestType=12"}),ea.push({cmd:"get_sp_request_ex",name:m+"Get Service Pkg request (ex)",converter3:N,call:o+"/CommonReg/secured?cmd=VIEW_USER_REQUEST&requestId="+t+"&includeSubdivisions=false&approverType=2&requestType=9"}),ea.push({cmd:"get_sp_request",name:m+"Get Service Pkg request",converter3:N,call:o+"/CommonReg/secured?cmd=VIEW_USER_REQUEST&requestId="+t+"&includeSubdivisions=false&approverType=1&requestType=9"}),ea.push({cmd:"get_user_request_ex",name:m+"Get User request (ex)",converter3:N,call:o+"/CommonReg/secured?cmd=VIEW_USER_REQUEST&requestId="+t+"&includeSubdivisions=false&approverType=2&requestType=3"}),ea.push({cmd:"get_user_request",name:m+"Get User request",converter3:N,call:o+"/CommonReg/secured?cmd=VIEW_USER_REQUEST&requestId="+t+"&includeSubdivisions=false&approverType=1&requestType=3"}),ea.push({cmd:"get_pending_user_requests",name:m+"Get Pending User requests",converter2:da,converter3:M,call:o+"/CommonReg/secured?cmd=USER_APPROVAL_QUEUE&approverType=1"}),ea.push({cmd:"get_pending_sp_requests",name:m+"Get Pending Service Pkg requests",converter2:da,converter3:M,call:o+"/CommonReg/secured?cmd=USER_APPROVAL_QUEUE&requestType=9&approverType=1"}),ea.push({cmd:"get_pending_site_requests",name:m+"Get Pending Site code requests",converter2:da,converter3:M,call:o+"/CommonReg/secured?cmd=USER_APPROVAL_QUEUE&requestType=12&approverType=1"}),ea.push({cmd:"get_pending_user_requests_ex",name:m+"Get Pending User requests (exchange)",converter2:da,converter3:M,call:o+"/CommonReg/secured?cmd=USER_APPROVAL_QUEUE&approverType=2"}),ea.push({cmd:"get_pending_sp_requests_ex",name:m+"Get Pending Service Pkg requests (exchange)",converter2:da,converter3:M,call:o+"/CommonReg/secured?cmd=USER_APPROVAL_QUEUE&requestType=9&approverType=2"}),ea.push({cmd:"get_roles",name:m+"Get Roles",converter2:X,converter3:L,call:o+"/CommonReg/secured?cmd=ROLE_MAIN"}),ea.push({cmd:"get_role",name:m+"Get Role",converter2:ca,converter3:K,call:o+"/CommonReg/secured?cmd=ROLE_VIEW&roleId="+s}),ea.push({cmd:"get_role_users",name:m+"Get Role Users",converter2:ba,converter3:H,call:o+"/CommonReg/secured?cmd=ROLE_VIEW_USERS&roleId="+s}),ea.push({cmd:"get_applications",name:m+"Get Applications",type:"json",call:o+"/CommonReg/secured?cmd=APPLICATION_JSON&loadType=loadData"}),ea.push({cmd:"get_users_audit_by_company",name:m+"Get Users Audit by Company",converter2:aa,converter3:J,call:o+"/CommonReg/secured?cmd=AUDIT_USERS_ADMIN_REVIEW&auditType=2&menu=reports"}),{getAppUrl:function(){return A},setAppUrl:function(a){A=a},getCompanyId:function(){return C},getDataCalls:function(){return ea},getNativeDataCalls:function(){var a=[];return _.each(ea,function(b){-1===b.name.indexOf(m)&&a.push(b)}),a},getX1DataCalls:function(){var a=[];return _.each(ea,function(b){b.name.indexOf(m)>-1&&(b.name=b.name.replace(m,""),a.push(b))}),a},initCompanyUser:function(){return g.apply(null,arguments)},get:function(){return j.apply(null,arguments)},getUsers:function(a){return j("get_users",a)},getUsersAuditByCompany:function(a){return j("get_users_audit_by_company",a)},getRoleUsers:function(a){return j("get_role_users",a)},getRole:function(a){return j("get_role",a)},getRoles:function(a){return j("get_roles",a)},getPendingSpRequestsEx:function(a){return j("get_pending_sp_requests_ex",a)},getPendingUserRequestsEx:function(a){return j("get_pending_user_requests_ex",a)},getPendingSpRequests:function(a){return j("get_pending_sp_requests",a)},getPendingUserRequests:function(a){return j("get_pending_user_requests",a)},getPendingSiteRequests:function(a){return j("get_pending_site_requests",a)},getUserRequest:function(a){return j("get_user_request",a)},getUserRequestEx:function(a){return j("get_user_request_ex",a)},getSpRequest:function(a){return j("get_sp_request",a)},getSpRequestEx:function(a){return j("get_sp_request_ex",a)},getSiteRequest:function(a){return j("get_site_request",a)},getOrgRequestsNonPending:function(a){return j("get_org_requests_nonpending",a)},getOrgRequestsPending:function(a){return j("get_org_requests_pending",a)},getOrgSpGrants:function(a){return j("get_org_sp_grants",a)},getApplications:function(a){return j("get_applications",a)},getOrgServicePackages:function(a){return j("get_org_service_packages",a)},getServicePackageDetail:function(a){return j("get_service_package_detail",a)},getOrganizationProfile:function(a){return j("get_org_profile",a)},getUserServicePackages:function(a){return j("get_user_service_packages",a)},sayHello:function(){cui.log("hello web")}}}}(window.cui=window.cui||{});